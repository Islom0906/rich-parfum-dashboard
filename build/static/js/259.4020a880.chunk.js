"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[259],{89259:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var t=a(72791),r=a(2409),l=a(50419),n=a(66106),o=a(30914),u=a(49389),i=a(87309),d=a(91933),c=a(27169),m=a(14138),p=a(57689),f=a(16030),g=a(77221),h=a(80184);const Z={name:"",date:""},y=()=>{const[e]=r.Z.useForm(),s=(0,p.s0)(),{editId:a}=(0,f.v9)((e=>e.editData)),y=(0,f.I0)(),{mutate:x,data:S,isLoading:b,isSuccess:F}=(0,d.useMutation)((e=>{let{url:s,data:a}=e;return c.Z.postData(s,a)}),{onSuccess:()=>{l.ZP.success("Success")},onError:e=>{for(let s in e.response.data)l.ZP.error("".concat(s,": ").concat(e.response.data[s][0]))}}),{isLoading:j,data:E,refetch:I,isSuccess:v}=(0,d.useQuery)(["smell-category",a],(()=>c.Z.getDataByID("/products/smell",a)),{enabled:!1}),{mutate:w,isLoading:V,data:D,isSuccess:P}=(0,d.useMutation)((e=>{let{url:s,data:a,id:t}=e;return c.Z.editData(s,a,t)}),{onSuccess:()=>{l.ZP.success("Success")},onError:e=>{for(let s in e.response.data)l.ZP.error("".concat(s,": ").concat(e.response.data[s][0]))}});(0,t.useEffect)((()=>{P&&y({type:g.Pb,payload:""}),(F||P)&&s("/smell")}),[S,D]),(0,t.useEffect)((()=>{""!==a&&I()}),[a]),(0,t.useEffect)((()=>{""===a&&e.setFieldsValue(Z)}),[]),(0,t.useEffect)((()=>{if(v){const s={name_uz:E.name_uz,name_ru:E.name_ru};e.setFieldsValue(s)}}),[E]);return(0,t.useEffect)((()=>{const s=JSON.parse(localStorage.getItem("myFormValues"));s&&(s.images=[],e.setFieldsValue(s));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]),(0,h.jsx)("div",{children:b||j||V?(0,h.jsx)(m.QP,{}):(0,h.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:Z,onFinish:e=>{E?w({url:"/products/smell",data:e,id:a}):x({url:"/products/smell/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,h.jsxs)(n.Z,{gutter:20,children:[(0,h.jsx)(o.Z,{span:12,children:(0,h.jsx)(r.Z.Item,{label:"Name uz",name:"name_uz",rules:[{required:!0,message:"Hidni nomini talab qilish"}],children:(0,h.jsx)(u.default,{})})}),(0,h.jsx)(o.Z,{span:12,children:(0,h.jsx)(r.Z.Item,{label:"Name Ru",name:"name_ru",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0439\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0430\u0445\u0430"}],children:(0,h.jsx)(u.default,{})})})]}),(0,h.jsx)(i.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:v?"Edit":"Add"})]})})}},30914:(e,s,a)=>{a.d(s,{Z:()=>t});const t=a(89752).Z}}]);
//# sourceMappingURL=259.4020a880.chunk.js.map