"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[890],{39890:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(72791),r=t(2409),n=t(50419),o=t(66106),d=t(30914),c=t(49389),l=t(87309),i=t(91933),u=t(27169),m=t(14138),p=t(57689),f=t(16030),g=t(77221),x=t(80184);const y={name:"",date:""},h=()=>{const[e]=r.Z.useForm(),a=(0,p.s0)(),{editId:t}=(0,f.v9)((e=>e.editData)),h=(0,f.I0)(),{mutate:Z,data:S,isLoading:F,isSuccess:b}=(0,i.useMutation)((e=>{let{url:a,data:t}=e;return u.Z.postData(a,t)}),{onSuccess:()=>{n.ZP.success("Success")},onError:e=>{for(let a in e.response.data)n.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}}),{isLoading:j,data:E,refetch:I,isSuccess:v}=(0,i.useQuery)(["edit-index-category",t],(()=>u.Z.getDataByID("/products/index-category",t)),{enabled:!1}),{mutate:w,isLoading:V,data:D,isSuccess:P}=(0,i.useMutation)((e=>{let{url:a,data:t,id:s}=e;return u.Z.editData(a,t,s)}),{onSuccess:()=>{n.ZP.success("Success")},onError:e=>{for(let a in e.response.data)n.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}});(0,s.useEffect)((()=>{P&&h({type:g.Pb,payload:""}),(b||P)&&a("/index-category")}),[S,D]),(0,s.useEffect)((()=>{""!==t&&I()}),[t]),(0,s.useEffect)((()=>{""===t&&e.setFieldsValue(y)}),[]),(0,s.useEffect)((()=>{if(v){const a={name:E.name,date:null===E.date?"":E.date};e.setFieldsValue(a)}}),[E]);return(0,s.useEffect)((()=>{const a=JSON.parse(localStorage.getItem("myFormValues"));a&&(a.images=[],e.setFieldsValue(a));const t=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",t),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",t)}}),[]),(0,x.jsx)("div",{children:F||j||V?(0,x.jsx)(m.QP,{}):(0,x.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:y,onFinish:e=>{E?w({url:"/products/index-category",data:e,id:t}):Z({url:"/products/index-category/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,x.jsxs)(o.Z,{gutter:20,children:[(0,x.jsx)(d.Z,{span:12,children:(0,x.jsx)(r.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430"}],children:(0,x.jsx)(c.default,{})})}),(0,x.jsx)(d.Z,{span:12,children:(0,x.jsx)(r.Z.Item,{label:"\u0414\u0430\u0442\u0430 (\u041d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",name:"date",children:(0,x.jsx)(c.default,{})})})]}),(0,x.jsx)(l.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:v?"Edit":"Add"})]})})}},30914:(e,a,t)=>{t.d(a,{Z:()=>s});const s=t(89752).Z}}]);
//# sourceMappingURL=890.fb502d0e.chunk.js.map