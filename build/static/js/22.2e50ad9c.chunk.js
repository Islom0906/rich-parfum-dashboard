"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[22],{68438:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(74165),a=n(15861),u=n(74569),s=n.n(u);s().defaults.baseURL="".concat("https://richparfum.uz/backend/api"),s().interceptors.request.use((function(e){var t=function(e){try{return localStorage.getItem(e)}catch(t){console.log("Error getting data")}}("richtoken"),n=null!==t?"Bearer ".concat(t):"";return e.headers.authorization=n,e}));var i=s(),o={getData:function(e){return(0,a.Z)((0,r.Z)().mark((function t(){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.get(e);case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},getDataByID:function(e,t){return(0,a.Z)((0,r.Z)().mark((function n(){var a,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.get("".concat(e,"/").concat(t));case 2:return a=n.sent,u=a.data,n.abrupt("return",u);case 5:case"end":return n.stop()}}),n)})))()},postData:function(e,t){return(0,a.Z)((0,r.Z)().mark((function n(){var a,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.post(e,t);case 2:return a=n.sent,u=a.data,n.abrupt("return",u);case 5:case"end":return n.stop()}}),n)})))()},editData:function(e,t,n){return(0,a.Z)((0,r.Z)().mark((function a(){var u,s;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.put("".concat(e,"/").concat(n,"/"),t);case 2:return u=r.sent,s=u.data,r.abrupt("return",s);case 5:case"end":return r.stop()}}),a)})))()},deleteData:function(e,t){return(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.delete("".concat(e,"/").concat(t));case 2:case"end":return n.stop()}}),n)})))()},deleteImages:function(e,t){return(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.delete(e,{data:t});case 2:case"end":return n.stop()}}),n)})))()}}},46570:function(e,t,n){n.r(t);var r=n(74165),a=n(15861),u=n(29439),s=n(72791),i=n(521),o=n(2409),c=n(50419),l=n(66106),d=n(30914),m=n(49389),f=n(93086),p=n(87309),Z=n(91933),x=n(68438),g=n(14138),h=n(57689),b=n(16030),v=n(77221),j=n(66920),_=n(22645),w=n(80184),y=i.Z.Title,z={full_name_uz:"",full_name_ru:"",job_uz:"",job_ru:"",text_uz:"",text_ru:"",image:"",facebook:"",instagram:"",telegram:"",youtube:""};t.default=function(){var e=o.Z.useForm(),t=(0,u.Z)(e,1)[0],n=(0,h.s0)(),i=(0,b.v9)((function(e){return e.editData})).editId,I=(0,b.I0)(),k=(0,s.useState)([]),F=(0,u.Z)(k,2),E=F[0],S=F[1],q=(0,Z.useMutation)((function(e){var t=e.url,n=e.data;return x.Z.postData(t,n)}),{onSuccess:function(){c.ZP.success("Success")},onError:function(e){for(var t in e.response.data)c.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),D=q.mutate,L=q.data,V=q.isLoading,B=q.isSuccess,P=(0,Z.useQuery)(["edit-partner",i],(function(){return x.Z.getDataByID("/about/partner",i)}),{enabled:!1}),C=P.isLoading,O=P.data,T=P.refetch,A=P.isSuccess,M=(0,Z.useMutation)((function(e){var t=e.url,n=e.data,r=e.id;return x.Z.editData(t,n,r)}),{onSuccess:function(){c.ZP.success("Success")},onError:function(e){for(var t in e.response.data)c.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),R=M.mutate,U=M.isLoading,N=M.data,H=M.isSuccess;(0,s.useEffect)((function(){H&&I({type:v.Pb,payload:""}),(B||H)&&n("/partner")}),[L,N]),(0,s.useEffect)((function(){""!==i&&T()}),[i]),(0,s.useEffect)((function(){""===i&&t.setFieldsValue(z)}),[]),(0,s.useEffect)((function(){if(A){var e=[{uid:null===O||void 0===O?void 0:O.id,name:null===O||void 0===O?void 0:O.id,status:"done",url:null===O||void 0===O?void 0:O.image}],n={full_name_uz:O.full_name_uz,full_name_ru:O.full_name_ru,job_uz:O.job_uz,job_ru:O.job_ru,text_uz:O.text_uz,text_ru:O.text_ru,image:O.image,facebook:O.facebook.split("//")[1],instagram:O.instagram.split("//")[1],telegram:O.telegram.split("//")[1],youtube:O.youtube.split("//")[1]};S(e),t.setFieldsValue(n)}}),[O]);(0,s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("myFormValues"));e&&(e.images=[],t.setFieldsValue(e));var n=function(){localStorage.setItem("myFormValues",JSON.stringify(t.getFieldsValue()))};return window.addEventListener("beforeunload",n),function(){localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",n)}}),[]);var J=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var n=new FileReader;n.readAsDataURL(t.originFileObj),n.onload=function(){return e(n.result)}}));case 4:n=e.sent;case 5:(a=new Image).src=n,null===(u=window.open(n))||void 0===u||u.document.write(a.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,w.jsx)("div",{children:V||C||U?(0,w.jsx)(g.QP,{}):(0,w.jsxs)(o.Z,{form:t,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:z,onFinish:function(e){var t,n,r=new FormData;(r.append("full_name_uz",e.full_name_uz),r.append("full_name_ru",e.full_name_ru),r.append("job_uz",e.job_uz),r.append("job_ru",e.job_ru),r.append("text_uz",e.text_uz),r.append("text_ru",e.text_ru),null!==(t=E[0])&&void 0!==t&&t.originFileObj)&&r.append("image",null===(n=E[0])||void 0===n?void 0:n.originFileObj);r.append("facebook","https://".concat(e.facebook)),r.append("telegram","https://".concat(e.telegram)),r.append("instagram","https://".concat(e.instagram)),r.append("youtube","https://".concat(e.youtube)),O?R({url:"/about/partner",data:r,id:i}):D({url:"/about/partner/",data:r})},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[(0,w.jsxs)(l.Z,{gutter:20,children:[(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"Full Name Uz",name:"full_name_uz",rules:[{required:!0,message:"F.I.O ni kiritish talab qilinadi"}],children:(0,w.jsx)(m.Z,{})})}),(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f Ru",name:"full_name_ru",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f"}],children:(0,w.jsx)(m.Z,{})})})]}),(0,w.jsxs)(l.Z,{gutter:20,children:[(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"Kasb",name:"job_uz",rules:[{required:!0,message:"Kasb talab qilinadi"}],children:(0,w.jsx)(m.Z,{})})}),(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"\u0420\u0430\u0431\u043e\u0442\u0430",name:"job_ru",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0420\u0430\u0431\u043e\u0442\u0430"}],children:(0,w.jsx)(m.Z,{})})})]}),(0,w.jsxs)(l.Z,{gutter:20,children:[(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"Fikr-mulohaza",name:"text_uz",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Fikr-mulohaza"}],children:(0,w.jsx)(j.Z,{rows:4})})}),(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c",name:"text_ru",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c"}],children:(0,w.jsx)(j.Z,{rows:4})})})]}),(0,w.jsx)(l.Z,{gutter:20,children:(0,w.jsx)(o.Z.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",name:"image",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}],children:(0,w.jsx)(_.Z,{rotationSlider:!0,children:(0,w.jsx)(f.Z,{maxCount:1,fileList:E,listType:"picture-card",onChange:function(e){var n=e.fileList;S(n),t.setFieldsValue({image:n})},onPreview:J,beforeUpload:function(){return!1},children:E.length>0?"":"Upload"})})})}),(0,w.jsx)(y,{level:4,children:"\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,w.jsxs)(l.Z,{gutter:20,children:[(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"Facebook",name:"facebook",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Facebook"}],children:(0,w.jsx)(m.Z,{addonBefore:"https://"})})}),(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"Instagram",name:"instagram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Instagram"}],children:(0,w.jsx)(m.Z,{addonBefore:"https://"})})})]}),(0,w.jsxs)(l.Z,{gutter:20,children:[(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"Telegram",name:"telegram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Telegram"}],children:(0,w.jsx)(m.Z,{addonBefore:"https://"})})}),(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(o.Z.Item,{label:"Youtube",name:"youtube",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Youtube"}],children:(0,w.jsx)(m.Z,{addonBefore:"https://"})})})]}),(0,w.jsx)(p.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:A?"Edit":"Add"})]})})}},31752:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1413),a=n(72791),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},s=n(54291),i=function(e,t){return a.createElement(s.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:u}))};i.displayName="EditOutlined";var o=a.forwardRef(i)},30914:function(e,t,n){var r=n(89752);t.Z=r.Z},42748:function(e,t,n){n.d(t,{G:function(){return s}});var r=n(14937),a=function(e){if((0,r.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some((function(e){return e in n.style}))}return!1},u=function(e,t){if(!a(e))return!1;var n=document.createElement("div"),r=n.style[e];return n.style[e]=t,n.style[e]!==r};function s(e,t){return Array.isArray(e)||void 0===t?a(e):u(e,t)}}}]);
//# sourceMappingURL=22.2e50ad9c.chunk.js.map