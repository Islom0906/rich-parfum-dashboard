"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[345],{95345:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var s=t(72791),n=t(2409),r=t(50419),c=t(66106),l=t(30914),i=t(49389),o=t(83099),u=t(87309),d=t(91933),m=t(27169),h=t(14138),f=t(57689),p=t(16030),g=t(77221),x=t(68747),Z=t(80184);const j={name_ru:"",name_uz:"",contact_child:[{name_uz:"",name_ru:"",text:""}]},y=()=>{const[e]=n.Z.useForm(),a=(0,f.s0)(),{editId:t}=(0,p.v9)((e=>e.editData)),y=(0,p.I0)(),{mutate:_,data:b,isLoading:v,isSuccess:I}=(0,d.useMutation)((e=>{let{url:a,data:t}=e;return m.Z.postData(a,t)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let a in e.response.data)r.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}}),{isLoading:S,data:z,refetch:F,isSuccess:w}=(0,d.useQuery)(["edit-contact",t],(()=>m.Z.getDataByID("/about/contact-father",t)),{enabled:!1}),{mutate:k,isLoading:E,data:C,isSuccess:V}=(0,d.useMutation)((e=>{let{url:a,data:t,id:s}=e;return m.Z.editData(a,t,s)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let a in e.response.data)r.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}});(0,s.useEffect)((()=>{V&&y({type:g.Pb,payload:""}),(I||V)&&a("/contact")}),[b,C]),(0,s.useEffect)((()=>{""!==t&&F()}),[t]),(0,s.useEffect)((()=>{""===t&&e.setFieldsValue(j)}),[]),(0,s.useEffect)((()=>{if(w){const a=[];null===z||void 0===z||z.contact_child.map((e=>{const t={name_ru:e.name_ru,name_uz:e.name_uz,text:e.text};a.push(t)}));const t={name_ru:z.name_ru,name_uz:z.name_uz,contact_child:a};e.setFieldsValue(t)}}),[z]);return(0,s.useEffect)((()=>{const a=JSON.parse(localStorage.getItem("myFormValues"));a&&(a.images=[],e.setFieldsValue(a));const t=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",t),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",t)}}),[]),(0,Z.jsx)("div",{children:v||S||E?(0,Z.jsx)(h.QP,{}):(0,Z.jsxs)(n.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:j,onFinish:e=>{z?k({url:"/about/contact-father",data:e,id:t}):_({url:"/about/contact-father/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,Z.jsxs)(c.Z,{gutter:20,children:[(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(n.Z.Item,{label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e Ru",name:"name_ru",rules:[{required:!0,message:"\u0412\u0432\u043e\u0434 \u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d Ru!"}],children:(0,Z.jsx)(i.default,{})})}),(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(n.Z.Item,{label:"Kontakt sarlavhasi Uz",name:"name_uz",rules:[{required:!0,message:"Kontakt sarlavhasi kiritish majburiy Uz!"}],children:(0,Z.jsx)(i.default,{})})})]}),(0,Z.jsx)(n.Z.List,{name:"contact_child",children:(e,a)=>{let{add:t,remove:s}=a;return(0,Z.jsxs)(Z.Fragment,{children:[e.map(((e,a)=>(0,Z.jsxs)("div",{style:{marginBottom:20},children:[(0,Z.jsxs)(o.Z,{align:"start",children:[(0,Z.jsx)(n.Z.Item,{label:"Bog'lanish uchun ".concat(a+1),name:[e.name,"name_uz"],rules:[{required:!0,message:"Bog'lanish uchun malumot kiriting"}],style:{width:"100%"},children:(0,Z.jsx)(i.default,{})}),(0,Z.jsx)(n.Z.Item,{label:"\u0421\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f ".concat(a+1),name:[e.name,"name_ru"],rules:[{required:!0,message:"\u0421\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d."}],style:{width:"100%"},children:(0,Z.jsx)(i.default,{})})]}),(0,Z.jsx)(x.Z,{onClick:()=>s(e.name)})]},e.fieldKey))),(0,Z.jsx)(n.Z.Item,{children:(0,Z.jsx)(u.Z,{type:"dashed",onClick:()=>t(),block:!0,children:"Add Item"})})]})}}),(0,Z.jsx)(u.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:w?"Edit":"Add"})]})})}},68747:(e,a,t)=>{t.d(a,{Z:()=>i});var s=t(1413),n=t(72791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};var c=t(54291),l=function(e,a){return n.createElement(c.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:a,icon:r}))};l.displayName="MinusCircleOutlined";const i=n.forwardRef(l)},30914:(e,a,t)=>{t.d(a,{Z:()=>s});const s=t(89752).Z}}]);
//# sourceMappingURL=345.676d1a05.chunk.js.map