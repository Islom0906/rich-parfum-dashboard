"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[51],{63051:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Z});var s=t(72791),o=t(2409),r=t(50419),l=t(66106),n=t(30914),i=t(49389),c=t(87309),u=t(91933),d=t(27169),m=t(14138),f=t(57689),p=t(16030),g=t(77221),b=t(80184);const h={facebook:"",instagram:"",telegram:"",youtube:""},Z=()=>{const[e]=o.Z.useForm(),a=(0,f.s0)(),{editId:t}=(0,p.v9)((e=>e.editData)),Z=(0,p.I0)(),{mutate:x,data:y,isLoading:j,isSuccess:F}=(0,u.useMutation)((e=>{let{url:a,data:t}=e;return d.Z.postData(a,t)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let a in e.response.data)r.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}}),{isLoading:I,data:S,refetch:k,isSuccess:E}=(0,u.useQuery)(["edit-social",t],(()=>d.Z.getDataByID("/about/social-media",t)),{enabled:!1}),{mutate:v,isLoading:w,data:V,isSuccess:D}=(0,u.useMutation)((e=>{let{url:a,data:t,id:s}=e;return d.Z.editData(a,t,s)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let a in e.response.data)r.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}});(0,s.useEffect)((()=>{D&&Z({type:g.Pb,payload:""}),(F||D)&&a("/social")}),[y,V]),(0,s.useEffect)((()=>{""!==t&&k()}),[t]),(0,s.useEffect)((()=>{""===t&&e.setFieldsValue(h)}),[]),(0,s.useEffect)((()=>{if(E){const a={facebook:S.facebook.split("//")[1],instagram:S.instagram.split("//")[1],telegram:S.telegram.split("//")[1],youtube:S.youtube.split("//")[1]};e.setFieldsValue(a)}}),[S]);return(0,s.useEffect)((()=>{const a=JSON.parse(localStorage.getItem("myFormValues"));a&&(a.images=[],e.setFieldsValue(a));const t=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",t),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",t)}}),[]),(0,b.jsx)("div",{children:j||I||w?(0,b.jsx)(m.QP,{}):(0,b.jsxs)(o.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:h,onFinish:e=>{const a={facebook:"https://".concat(e.facebook),telegram:"https://".concat(e.telegram),instagram:"https://".concat(e.instagram),youtube:"https://".concat(e.youtube)};S?v({url:"/about/social-media",data:a,id:t}):x({url:"/about/social-media/",data:a})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,b.jsxs)(l.Z,{gutter:20,children:[(0,b.jsx)(n.Z,{span:12,children:(0,b.jsx)(o.Z.Item,{label:"Facebook",name:"facebook",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Facebook"}],children:(0,b.jsx)(i.default,{addonBefore:"https://"})})}),(0,b.jsx)(n.Z,{span:12,children:(0,b.jsx)(o.Z.Item,{label:"Instagram",name:"instagram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Instagram"}],children:(0,b.jsx)(i.default,{addonBefore:"https://"})})})]}),(0,b.jsxs)(l.Z,{gutter:20,children:[(0,b.jsx)(n.Z,{span:12,children:(0,b.jsx)(o.Z.Item,{label:"Telegram",name:"telegram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Telegram"}],children:(0,b.jsx)(i.default,{addonBefore:"https://"})})}),(0,b.jsx)(n.Z,{span:12,children:(0,b.jsx)(o.Z.Item,{label:"Youtube",name:"youtube",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Youtube"}],children:(0,b.jsx)(i.default,{addonBefore:"https://"})})})]}),(0,b.jsx)(c.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:E?"Edit":"Add"})]})})}},30914:(e,a,t)=>{t.d(a,{Z:()=>s});const s=t(89752).Z}}]);
//# sourceMappingURL=51.f302ff1f.chunk.js.map