"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[51],{68438:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(74165),r=a(15861),s=a(74569),o=a.n(s);o().defaults.baseURL="".concat("http://richparfum.uz/backend/api"),o().interceptors.request.use((function(e){var t=function(e){try{return localStorage.getItem(e)}catch(t){console.log("Error getting data")}}("richtoken"),a=null!==t?"Bearer ".concat(t):"";return e.headers.authorization=a,e}));var c=o(),u={getData:function(e){return(0,r.Z)((0,n.Z)().mark((function t(){var a,r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.get(e);case 2:return a=t.sent,r=a.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))()},getDataByID:function(e,t){return(0,r.Z)((0,n.Z)().mark((function a(){var r,s;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.get("".concat(e,"/").concat(t));case 2:return r=a.sent,s=r.data,a.abrupt("return",s);case 5:case"end":return a.stop()}}),a)})))()},postData:function(e,t){return(0,r.Z)((0,n.Z)().mark((function a(){var r,s;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.post(e,t);case 2:return r=a.sent,s=r.data,a.abrupt("return",s);case 5:case"end":return a.stop()}}),a)})))()},editData:function(e,t,a){return(0,r.Z)((0,n.Z)().mark((function r(){var s,o;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.put("".concat(e,"/").concat(a,"/"),t);case 2:return s=n.sent,o=s.data,n.abrupt("return",o);case 5:case"end":return n.stop()}}),r)})))()},deleteData:function(e,t){return(0,r.Z)((0,n.Z)().mark((function a(){return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.delete("".concat(e,"/").concat(t));case 2:case"end":return a.stop()}}),a)})))()},deleteImages:function(e,t){return(0,r.Z)((0,n.Z)().mark((function a(){return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(),a.next=3,c.delete(e,{data:t});case 3:case"end":return a.stop()}}),a)})))()}}},63051:function(e,t,a){a.r(t);var n=a(29439),r=a(72791),s=a(2409),o=a(50419),c=a(66106),u=a(30914),i=a(49389),l=a(87309),d=a(91933),f=a(68438),m=a(14138),p=a(57689),g=a(16030),Z=a(77221),h=a(80184),b={facebook:"",instagram:"",telegram:"",youtube:""};t.default=function(){var e=s.Z.useForm(),t=(0,n.Z)(e,1)[0],a=(0,p.s0)(),x=(0,g.v9)((function(e){return e.editData})).editId,v=(0,g.I0)(),y=(0,d.useMutation)((function(e){var t=e.url,a=e.data;return f.Z.postData(t,a)}),{onSuccess:function(){o.ZP.success("Success")},onError:function(e){for(var t in e.response.data)o.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),k=y.mutate,w=y.data,j=y.isLoading,I=y.isSuccess,F=(0,d.useQuery)(["edit-social",x],(function(){return f.Z.getDataByID("/about/social-media",x)}),{enabled:!1}),S=F.isLoading,D=F.data,E=F.refetch,V=F.isSuccess,B=(0,d.useMutation)((function(e){var t=e.url,a=e.data,n=e.id;return f.Z.editData(t,a,n)}),{onSuccess:function(){o.ZP.success("Success")},onError:function(e){for(var t in e.response.data)o.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),L=B.mutate,P=B.isLoading,q=B.data,C=B.isSuccess;(0,r.useEffect)((function(){C&&v({type:Z.Pb,payload:""}),(I||C)&&a("/social")}),[w,q]),(0,r.useEffect)((function(){""!==x&&E()}),[x]),(0,r.useEffect)((function(){""===x&&t.setFieldsValue(b)}),[]),(0,r.useEffect)((function(){if(V){var e={facebook:D.facebook.split("//")[1],instagram:D.instagram.split("//")[1],telegram:D.telegram.split("//")[1],youtube:D.youtube.split("//")[1]};t.setFieldsValue(e)}}),[D]);return(0,r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("myFormValues"));e&&(e.images=[],t.setFieldsValue(e));var a=function(){localStorage.setItem("myFormValues",JSON.stringify(t.getFieldsValue()))};return window.addEventListener("beforeunload",a),function(){localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]),(0,h.jsx)("div",{children:j||S||P?(0,h.jsx)(m.QP,{}):(0,h.jsxs)(s.Z,{form:t,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:b,onFinish:function(e){var t={facebook:"https://".concat(e.facebook),telegram:"https://".concat(e.telegram),instagram:"https://".concat(e.instagram),youtube:"https://".concat(e.youtube)};D?L({url:"/about/social-media",data:t,id:x}):k({url:"/about/social-media/",data:t})},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[(0,h.jsxs)(c.Z,{gutter:20,children:[(0,h.jsx)(u.Z,{span:12,children:(0,h.jsx)(s.Z.Item,{label:"Facebook",name:"facebook",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Facebook"}],children:(0,h.jsx)(i.Z,{addonBefore:"https://"})})}),(0,h.jsx)(u.Z,{span:12,children:(0,h.jsx)(s.Z.Item,{label:"Instagram",name:"instagram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Instagram"}],children:(0,h.jsx)(i.Z,{addonBefore:"https://"})})})]}),(0,h.jsxs)(c.Z,{gutter:20,children:[(0,h.jsx)(u.Z,{span:12,children:(0,h.jsx)(s.Z.Item,{label:"Telegram",name:"telegram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Telegram"}],children:(0,h.jsx)(i.Z,{addonBefore:"https://"})})}),(0,h.jsx)(u.Z,{span:12,children:(0,h.jsx)(s.Z.Item,{label:"Youtube",name:"youtube",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Youtube"}],children:(0,h.jsx)(i.Z,{addonBefore:"https://"})})})]}),(0,h.jsx)(l.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:V?"Edit":"Add"})]})})}},30914:function(e,t,a){var n=a(89752);t.Z=n.Z}}]);
//# sourceMappingURL=51.54f20c83.chunk.js.map