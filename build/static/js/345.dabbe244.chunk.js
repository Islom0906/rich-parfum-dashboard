"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[345],{68438:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(74165),r=n(15861),c=n(74569),u=n.n(c);u().defaults.baseURL="".concat("https://richparfum.uz/backend/api"),u().interceptors.request.use((function(e){var t=function(e){try{return localStorage.getItem(e)}catch(t){console.log("Error getting data")}}("richtoken"),n=null!==t?"Bearer ".concat(t):"";return e.headers.authorization=n,e}));var s=u(),o={getData:function(e){return(0,r.Z)((0,a.Z)().mark((function t(){var n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get(e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))()},getDataByID:function(e,t){return(0,r.Z)((0,a.Z)().mark((function n(){var r,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.get("".concat(e,"/").concat(t));case 2:return r=n.sent,c=r.data,n.abrupt("return",c);case 5:case"end":return n.stop()}}),n)})))()},postData:function(e,t){return(0,r.Z)((0,a.Z)().mark((function n(){var r,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.post(e,t);case 2:return r=n.sent,c=r.data,n.abrupt("return",c);case 5:case"end":return n.stop()}}),n)})))()},editData:function(e,t,n){return(0,r.Z)((0,a.Z)().mark((function r(){var c,u;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.put("".concat(e,"/").concat(n,"/"),t);case 2:return c=a.sent,u=c.data,a.abrupt("return",u);case 5:case"end":return a.stop()}}),r)})))()},deleteData:function(e,t){return(0,r.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.delete("".concat(e,"/").concat(t));case 2:case"end":return n.stop()}}),n)})))()},deleteImages:function(e,t){return(0,r.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.delete(e,{data:t});case 2:case"end":return n.stop()}}),n)})))()}}},95345:function(e,t,n){n.r(t);var a=n(29439),r=n(72791),c=n(2409),u=n(50419),s=n(66106),o=n(30914),i=n(49389),l=n(83099),d=n(87309),f=n(91933),m=n(68438),h=n(14138),p=n(57689),Z=n(16030),v=n(77221),x=n(68747),g=n(80184),b={name_ru:"",name_uz:"",contact_child:[{name_uz:"",name_ru:"",text:""}]};t.default=function(){var e=c.Z.useForm(),t=(0,a.Z)(e,1)[0],n=(0,p.s0)(),w=(0,Z.v9)((function(e){return e.editData})).editId,j=(0,Z.I0)(),y=(0,f.useMutation)((function(e){var t=e.url,n=e.data;return m.Z.postData(t,n)}),{onSuccess:function(){u.ZP.success("Success")},onError:function(e){for(var t in e.response.data)u.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),_=y.mutate,k=y.data,I=y.isLoading,z=y.isSuccess,S=(0,f.useQuery)(["edit-contact",w],(function(){return m.Z.getDataByID("/about/contact-father",w)}),{enabled:!1}),F=S.isLoading,D=S.data,E=S.refetch,C=S.isSuccess,V=(0,f.useMutation)((function(e){var t=e.url,n=e.data,a=e.id;return m.Z.editData(t,n,a)}),{onSuccess:function(){u.ZP.success("Success")},onError:function(e){for(var t in e.response.data)u.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),B=V.mutate,L=V.isLoading,P=V.data,q=V.isSuccess;(0,r.useEffect)((function(){q&&j({type:v.Pb,payload:""}),(z||q)&&n("/contact")}),[k,P]),(0,r.useEffect)((function(){""!==w&&E()}),[w]),(0,r.useEffect)((function(){""===w&&t.setFieldsValue(b)}),[]),(0,r.useEffect)((function(){if(C){var e=[];null===D||void 0===D||D.contact_child.map((function(t){var n={name_ru:t.name_ru,name_uz:t.name_uz,text:t.text};e.push(n)}));var n={name_ru:D.name_ru,name_uz:D.name_uz,contact_child:e};t.setFieldsValue(n)}}),[D]);return(0,r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("myFormValues"));e&&(e.images=[],t.setFieldsValue(e));var n=function(){localStorage.setItem("myFormValues",JSON.stringify(t.getFieldsValue()))};return window.addEventListener("beforeunload",n),function(){localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",n)}}),[]),(0,g.jsx)("div",{children:I||F||L?(0,g.jsx)(h.QP,{}):(0,g.jsxs)(c.Z,{form:t,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:b,onFinish:function(e){D?B({url:"/about/contact-father",data:e,id:w}):_({url:"/about/contact-father/",data:e})},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[(0,g.jsxs)(s.Z,{gutter:20,children:[(0,g.jsx)(o.Z,{span:12,children:(0,g.jsx)(c.Z.Item,{label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e Ru",name:"name_ru",rules:[{required:!0,message:"\u0412\u0432\u043e\u0434 \u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d Ru!"}],children:(0,g.jsx)(i.Z,{})})}),(0,g.jsx)(o.Z,{span:12,children:(0,g.jsx)(c.Z.Item,{label:"Kontakt sarlavhasi Uz",name:"name_uz",rules:[{required:!0,message:"Kontakt sarlavhasi kiritish majburiy Uz!"}],children:(0,g.jsx)(i.Z,{})})})]}),(0,g.jsx)(c.Z.List,{name:"contact_child",children:function(e,t){var n=t.add,a=t.remove;return(0,g.jsxs)(g.Fragment,{children:[e.map((function(e,t){return(0,g.jsxs)("div",{style:{marginBottom:20},children:[(0,g.jsxs)(l.Z,{align:"start",children:[(0,g.jsx)(c.Z.Item,{label:"Bog'lanish uchun ".concat(t+1),name:[e.name,"name_uz"],rules:[{required:!0,message:"Bog'lanish uchun malumot kiriting"}],style:{width:"100%"},children:(0,g.jsx)(i.Z,{})}),(0,g.jsx)(c.Z.Item,{label:"\u0421\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f ".concat(t+1),name:[e.name,"name_ru"],rules:[{required:!0,message:"\u0421\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d."}],style:{width:"100%"},children:(0,g.jsx)(i.Z,{})})]}),(0,g.jsx)(x.Z,{onClick:function(){return a(e.name)}})]},e.fieldKey)})),(0,g.jsx)(c.Z.Item,{children:(0,g.jsx)(d.Z,{type:"dashed",onClick:function(){return n()},block:!0,children:"Add Item"})})]})}}),(0,g.jsx)(d.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:C?"Edit":"Add"})]})})}},68747:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(1413),r=n(72791),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},u=n(54291),s=function(e,t){return r.createElement(u.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:c}))};s.displayName="MinusCircleOutlined";var o=r.forwardRef(s)},30914:function(e,t,n){var a=n(89752);t.Z=a.Z}}]);
//# sourceMappingURL=345.dabbe244.chunk.js.map